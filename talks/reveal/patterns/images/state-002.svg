<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="273px" preserveAspectRatio="none" style="width:802px;height:273px;" version="1.1" viewBox="0 0 802 273" width="802px" zoomAndPan="magnify"><defs><filter height="300%" id="f12yxkesgi4dof" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--class TCPEstablished--><rect fill="#FEFECE" filter="url(#f12yxkesgi4dof)" height="86.8652" id="TCPEstablished" style="stroke: #A80036; stroke-width: 1.5;" width="121" x="461" y="176"/><ellipse cx="476" cy="192" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M478.9731,197.6431 Q478.3921,197.9419 477.7529,198.0913 Q477.1138,198.2407 476.4082,198.2407 Q473.9014,198.2407 472.5815,196.5889 Q471.2617,194.937 471.2617,191.8159 Q471.2617,188.6865 472.5815,187.0347 Q473.9014,185.3828 476.4082,185.3828 Q477.1138,185.3828 477.7612,185.5322 Q478.4087,185.6816 478.9731,185.9805 L478.9731,188.7031 Q478.3423,188.1221 477.7488,187.8523 Q477.1553,187.5825 476.5244,187.5825 Q475.1797,187.5825 474.4949,188.6492 Q473.8101,189.7158 473.8101,191.8159 Q473.8101,193.9077 474.4949,194.9744 Q475.1797,196.041 476.5244,196.041 Q477.1553,196.041 477.7488,195.7712 Q478.3423,195.5015 478.9731,194.9204 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="89" x="490" y="196.5352">TCPEstablished</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="462" x2="581" y1="208" y2="208"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="469" y="216.9775"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="76" x="481" y="222.6348">socket : string</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="462" x2="581" y1="228.9551" y2="228.9551"/><ellipse cx="472" cy="240.9326" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="35" x="481" y="243.5898">open()</text><ellipse cx="472" cy="253.8877" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="36" x="481" y="256.5449">close()</text><!--class TCPClosed--><rect fill="#FEFECE" filter="url(#f12yxkesgi4dof)" height="73.9102" id="TCPClosed" style="stroke: #A80036; stroke-width: 1.5;" width="94" x="331.5" y="182.5"/><ellipse cx="346.5" cy="198.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M349.4731,204.1431 Q348.8921,204.4419 348.2529,204.5913 Q347.6138,204.7407 346.9082,204.7407 Q344.4014,204.7407 343.0815,203.0889 Q341.7617,201.437 341.7617,198.3159 Q341.7617,195.1865 343.0815,193.5347 Q344.4014,191.8828 346.9082,191.8828 Q347.6138,191.8828 348.2612,192.0322 Q348.9087,192.1816 349.4731,192.4805 L349.4731,195.2031 Q348.8423,194.6221 348.2488,194.3523 Q347.6553,194.0825 347.0244,194.0825 Q345.6797,194.0825 344.9949,195.1492 Q344.3101,196.2158 344.3101,198.3159 Q344.3101,200.4077 344.9949,201.4744 Q345.6797,202.541 347.0244,202.541 Q347.6553,202.541 348.2488,202.2712 Q348.8423,202.0015 349.4731,201.4204 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="62" x="360.5" y="203.0352">TCPClosed</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="332.5" x2="424.5" y1="214.5" y2="214.5"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="332.5" x2="424.5" y1="222.5" y2="222.5"/><ellipse cx="342.5" cy="234.4775" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="35" x="351.5" y="237.1348">open()</text><ellipse cx="342.5" cy="247.4326" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="36" x="351.5" y="250.0898">close()</text><!--class TCPError--><rect fill="#FEFECE" filter="url(#f12yxkesgi4dof)" height="86.8652" id="TCPError" style="stroke: #A80036; stroke-width: 1.5;" width="141" x="155" y="176"/><ellipse cx="195.65" cy="192" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M198.6231,197.6431 Q198.0421,197.9419 197.4029,198.0913 Q196.7638,198.2407 196.0582,198.2407 Q193.5514,198.2407 192.2315,196.5889 Q190.9117,194.937 190.9117,191.8159 Q190.9117,188.6865 192.2315,187.0347 Q193.5514,185.3828 196.0582,185.3828 Q196.7638,185.3828 197.4112,185.5322 Q198.0587,185.6816 198.6231,185.9805 L198.6231,188.7031 Q197.9923,188.1221 197.3988,187.8523 Q196.8053,187.5825 196.1744,187.5825 Q194.8297,187.5825 194.1449,188.6492 Q193.4601,189.7158 193.4601,191.8159 Q193.4601,193.9077 194.1449,194.9744 Q194.8297,196.041 196.1744,196.041 Q196.8053,196.041 197.3988,195.7712 Q197.9923,195.5015 198.6231,194.9204 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="52" x="215.35" y="196.5352">TCPError</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="156" x2="295" y1="208" y2="208"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="163" y="216.9775"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="115" x="175" y="222.6348">errorMessage : string</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="156" x2="295" y1="228.9551" y2="228.9551"/><ellipse cx="166" cy="240.9326" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="35" x="175" y="243.5898">open()</text><ellipse cx="166" cy="253.8877" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="36" x="175" y="256.5449">close()</text><!--class TCPConnection--><rect fill="#FEFECE" filter="url(#f12yxkesgi4dof)" height="107.8203" id="TCPConnection" style="stroke: #A80036; stroke-width: 1.5;" width="118" x="166.5" y="8"/><ellipse cx="181.5" cy="24" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M184.4731,29.6431 Q183.8921,29.9419 183.2529,30.0913 Q182.6138,30.2407 181.9082,30.2407 Q179.4014,30.2407 178.0815,28.5889 Q176.7617,26.937 176.7617,23.8159 Q176.7617,20.6865 178.0815,19.0347 Q179.4014,17.3828 181.9082,17.3828 Q182.6138,17.3828 183.2612,17.5322 Q183.9087,17.6816 184.4731,17.9805 L184.4731,20.7031 Q183.8423,20.1221 183.2488,19.8523 Q182.6553,19.5825 182.0244,19.5825 Q180.6797,19.5825 179.9949,20.6492 Q179.3101,21.7158 179.3101,23.8159 Q179.3101,25.9077 179.9949,26.9744 Q180.6797,28.041 182.0244,28.041 Q182.6553,28.041 183.2488,27.7712 Q183.8423,27.5015 184.4731,26.9204 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="86" x="195.5" y="28.5352">TCPConnection</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="167.5" x2="283.5" y1="40" y2="40"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="174.5" y="48.9775"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="82" x="186.5" y="54.6348">state : TCPState</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="167.5" x2="283.5" y1="60.9551" y2="60.9551"/><ellipse cx="177.5" cy="72.9326" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="35" x="186.5" y="75.5898">open()</text><ellipse cx="177.5" cy="85.8877" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="36" x="186.5" y="88.5449">close()</text><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,2.0;" x1="167.5" x2="283.5" y1="94.8652" y2="94.8652"/><ellipse cx="177.5" cy="106.8428" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="35" x="186.5" y="109.5">getId()</text><!--class TCPState--><rect fill="#FEFECE" filter="url(#f12yxkesgi4dof)" height="73.9102" id="TCPState" style="stroke: #A80036; stroke-width: 1.5;" width="117" x="320" y="25"/><ellipse cx="350.3" cy="41" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M346.2277,36.7651 L346.2277,34.6069 L353.6071,34.6069 L353.6071,36.7651 L351.1418,36.7651 L351.1418,44.8418 L353.6071,44.8418 L353.6071,47 L346.2277,47 L346.2277,44.8418 L348.6931,44.8418 L348.6931,36.7651 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="51" x="367.7" y="45.5352">TCPState</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="321" x2="436" y1="57" y2="57"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="321" x2="436" y1="65" y2="65"/><ellipse cx="331" cy="76.9775" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="91" x="340" y="79.6348">open() : TCPState</text><ellipse cx="331" cy="89.9326" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="36" x="340" y="92.5898">close()</text><path d="M6,43.5 L6,70.8354 A0,0 0 0 0 6,70.8354 L131,70.8354 A0,0 0 0 0 131,70.8354 L131,61.5 L170.5,71.4326 L131,53.5 L131,53.5 L121,43.5 L6,43.5 A0,0 0 0 0 6,43.5 " fill="#FBFB77" filter="url(#f12yxkesgi4dof)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M121,43.5 L121,53.5 L131,53.5 L121,43.5 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="Monaco" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="104" x="12" y="62.5854">state-&gt;open()</text><path d="M617,182 L617,191.6677 L516,239.4326 L617,199.6677 L617,209.3354 A0,0 0 0 0 617,209.3354 L790,209.3354 A0,0 0 0 0 790,209.3354 L790,192 L780,182 L617,182 A0,0 0 0 0 617,182 " fill="#FBFB77" filter="url(#f12yxkesgi4dof)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M780,182 L780,192 L790,192 L780,182 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="Monaco" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="152" x="623" y="201.0854">Already Established</text><path d="M617,219.3354 L617,229.0032 L517,252.3877 L617,237.0032 L617,246.6709 A0,0 0 0 0 617,246.6709 L758,246.6709 A0,0 0 0 0 758,246.6709 L758,229.3354 L748,219.3354 L617,219.3354 A0,0 0 0 0 617,219.3354 " fill="#FBFB77" filter="url(#f12yxkesgi4dof)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M748,219.3354 L748,229.3354 L758,229.3354 L748,219.3354 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="Monaco" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="120" x="623" y="238.4209">socket-&gt;close()</text><!--link TCPState to TCPEstablished--><path d="M425.9836,114.2983 C444.0692,134.2178 464.4743,156.692 481.7674,175.7386 " fill="none" id="TCPState-TCPEstablished" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="none" points="420.6506,118.8381,412.389,99.3253,431.0157,109.4272,420.6506,118.8381" style="stroke: #A80036; stroke-width: 1.0;"/><!--link TCPState to TCPClosed--><path d="M378.5,119.3816 C378.5,140.4177 378.5,163.6546 378.5,182.4426 " fill="none" id="TCPState-TCPClosed" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="none" points="371.5001,119.3253,378.5,99.3253,385.5001,119.3253,371.5001,119.3253" style="stroke: #A80036; stroke-width: 1.0;"/><!--link TCPState to TCPError--><path d="M328.2671,113.7103 C308.7761,133.7746 286.6958,156.5043 268.0111,175.7386 " fill="none" id="TCPState-TCPError" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="none" points="323.2844,108.7934,342.2411,99.3253,333.3264,118.5484,323.2844,108.7934" style="stroke: #A80036; stroke-width: 1.0;"/><!--link TCPConnection$$$LEFT to TCPConnection--><!--link TCPEstablished to TCPEstablished$$$RIGHT--><!--link TCPConnection to TCPState--><path d="M297.8631,62 C300.8412,62 303.8192,62 306.7973,62 " fill="none" id="TCPConnection-TCPState" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="319.855,62,310.855,58,314.855,62,310.855,66,319.855,62" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="314.855" x2="306.855" y1="62" y2="61.9999"/><polygon fill="#FFFFFF" points="284.668,62,290.668,66,296.668,62,290.668,58,284.668,62" style="stroke: #A80036; stroke-width: 1.0;"/><!--
@startuml

skinparam noteFontName Monaco

class TCPConnection {
    - state : TCPState
    - -
    + open()
    + close()
    ..
    + getId()
}


interface TCPState {
    + open() : TCPState
    + close()
}

together {
    class TCPEstablished implements TCPState {
        - socket : string
        + open()
        + close()
    }

    class TCPClosed implements TCPState {
        + open()
        + close()
    }

    class TCPError implements TCPState {
        - errorMessage : string
        + open()
        + close()
    }
}

note left of TCPConnection::open()
    state->open()
endnote

note right of TCPEstablished::open()
Already Established
endnote

note right of TCPEstablished::close()
    socket->close()
endnote

TCPState <-right-o TCPConnection

@enduml

PlantUML version 1.2018.09(Fri Jul 27 18:58:18 CEST 2018)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 1.8.0_152-release-1248-b8
Operating System: Mac OS X
OS Version: 10.13.6
Default Encoding: UTF-8
Language: de
Country: DE
--></g></svg>